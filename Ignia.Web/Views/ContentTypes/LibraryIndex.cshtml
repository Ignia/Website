@model LibraryIndexTopicViewModel

@{
  Layout = "~/Views/Layout/_Layout.cshtml";
}

@section Head {
  <!-- Library Index View Styles -->
  <link rel="stylesheet" href="/Shared/Styles/Views/Library.css" />
}

@section PageHeaderSection {
  @Html.Partial("~/Views/Layout/Header.Library.cshtml")
}

@section PageBodySection {

  <!-- Articles Listing/Index -->
  <article id="ArticlesIndex" class="library index" role="article">
    <div class="container grid-container">

      <!-- Introduction -->
      <div class="grid-x grid-margin-x">
        <div class="introduction cell">@Html.Raw(Model.Body)</div>
      </div>
      <!-- /Introduction -->

      @foreach (var category in Model.GetCategorizedArticles()) {
        <!-- @category.Key Articles -->
        <section class="grid-x grid-margin-x" role="region">
          <header class="cell">
            <h2>@Model.GetCategoryHeading(category.Key)</h2>
          </header>
          @foreach (var article in category.Value) {
            @WriteArticleItem(article)
          }
        </section>
        <!-- /@category.Key Articles -->
      }

    </div>
  </article>
  <!-- /Articles Listing/Index -->

}

@helper WriteArticleItem(ArticleTopicViewModel article) {
  <div id="@(article.ContentType + article.Key)" class="medium-10 medium-offset-1 cell">
    <!-- Section Heading -->
    <h3 class="heading"><a href="@article.WebPath">@article.Title</a></h3>
    <!-- Abstract / Description -->
    <span class="description medium-10 medium-offset-1 cell">@Html.Raw(article.Abstract)</span>
  </div>
}
